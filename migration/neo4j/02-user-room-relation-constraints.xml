<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:neo4j="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">
    <changeSet id="owned_key" author="tobiska">
        <neo4j:cypher>CREATE CONSTRAINT owned
            FOR ()-[owned:OWNED]-() REQUIRE (owned.id, owned.createAt) IS RELATIONSHIP KEY</neo4j:cypher>
        <rollback>DROP CONSTRAINT owned</rollback>
    </changeSet>
    <changeSet id="owned_id_unique" author="tobiska">
        <neo4j:cypher>CREATE CONSTRAINT owned_id
            FOR ()-[owned:OWNED]-() REQUIRE owned.id IS UNIQUE</neo4j:cypher>
        <rollback>DROP CONSTRAINT owned_id</rollback>
    </changeSet>

    <changeSet id="joined_key" author="tobiska">
        <neo4j:cypher>CREATE CONSTRAINT joined
            FOR ()-[joined:JOINED]-() REQUIRE (joined.id, joined.createAt) IS RELATIONSHIP KEY</neo4j:cypher>
        <rollback>DROP CONSTRAINT joined</rollback>
    </changeSet>
    <changeSet id="joined_id_unique" author="tobiska">
        <neo4j:cypher>CREATE CONSTRAINT joined_id
            FOR ()-[joined:JOINED]-() REQUIRE joined.id IS UNIQUE</neo4j:cypher>
        <rollback>DROP CONSTRAINT joined_id</rollback>
    </changeSet>

    <changeSet id="invited_key" author="tobiska">
        <neo4j:cypher>CREATE CONSTRAINT invited
            FOR ()-[invited:INVITED]-() REQUIRE (invited.id, invited.createAt) IS RELATIONSHIP KEY</neo4j:cypher>
        <rollback>DROP CONSTRAINT invited</rollback>
    </changeSet>
    <changeSet id="invited_id_unique" author="tobiska">
        <neo4j:cypher>CREATE CONSTRAINT invited_id
            FOR ()-[invited:INVITED]-() REQUIRE invited.id IS UNIQUE</neo4j:cypher>
        <rollback>DROP CONSTRAINT invited_id</rollback>
    </changeSet>
</databaseChangeLog>
